(function(t){var e=function(){var i=t,r=document,n=r.documentElement,a=0;return{getUid:function(t){var e=++a;if(t){var i=t.charCodeAt(t.length-1);if(i>=48&&i<=57)t+="_";return t+e}return e},viewToString:function(t){var e,i=t;while(i){e=e?i.id+"."+e:i.id;i=i.parent}return e},copy:function(t,e,i){for(var r in e){if(!i||t.hasOwnProperty(r)||t[r]!==undefined){t[r]=e[r]}}return t},browser:function(){var t=navigator.userAgent;var e={iphone:/iphone/i.test(t),ipad:/ipad/i.test(t),ipod:/ipod/i.test(t),ios:/iphone|ipad|ipod/i.test(t),android:/android/i.test(t),webkit:/webkit/i.test(t),chrome:/chrome/i.test(t),safari:/safari/i.test(t),firefox:/firefox/i.test(t),ie:/msie/i.test(t),opera:/opera/i.test(t),supportTouch:"ontouchstart"in i,supportCanvas:r.createElement("canvas").getContext!=null,supportStorage:false,supportOrientation:"orientation"in i,supportDeviceMotion:"ondevicemotion"in i};try{var a="hilo";localStorage.setItem(a,a);localStorage.removeItem(a);e.supportStorage=true}catch(s){}var o=e.jsVendor=e.webkit?"webkit":e.firefox?"Moz":e.opera?"O":e.ie?"ms":"";var l=e.cssVendor="-"+o+"-";var h=r.createElement("div"),u=h.style;var c=u[o+"Transform"]!=undefined;var f=u[o+"Perspective"]!=undefined;if(f){h.id="test3d";u=r.createElement("style");u.textContent="@media ("+l+"transform-3d){#test3d{height:3px}}";r.head.appendChild(u);n.appendChild(h);f=h.offsetHeight==3;r.head.removeChild(u);n.removeChild(h)}e.supportTransform=c;e.supportTransform3D=f;return e}(),event:function(){var t="ontouchstart"in i;return{POINTER_START:t?"touchstart":"mousedown",POINTER_MOVE:t?"touchmove":"mousemove",POINTER_END:t?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(t){try{var e=t.getBoundingClientRect()}catch(r){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var a=(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)||0;var s=(i.pageYOffset||n.scrollTop)-(n.clientTop||0)||0;var o=i.getComputedStyle?getComputedStyle(t):t.currentStyle;var l=parseInt;var h=l(o.paddingLeft)+l(o.borderLeftWidth)||0;var u=l(o.paddingTop)+l(o.borderTopWidth)||0;var c=l(o.paddingRight)+l(o.borderRightWidth)||0;var f=l(o.paddingBottom)+l(o.borderBottomWidth)||0;var d=e.top||0;var v=e.left||0;return{left:v+a+h,top:d+s+u,width:e.right-c-v-h,height:e.bottom-f-d-u}},createElement:function(t,e){var i=r.createElement(t),n,a,s;for(n in e){a=e[n];if(n==="style"){for(s in a)i.style[s]=a[s]}else{i[n]=a}}return i},getElement:function(t){return r.getElementById(t)},setElementStyleByView:function(t){var i=t.drawable,r=i.domElement.style,n=t._stateCache||(t._stateCache={}),a=e.browser.jsVendor,s="px",o=false;if(this.cacheStateIfChanged(t,["visible"],n)){r.display=!t.visible?"none":""}if(this.cacheStateIfChanged(t,["alpha"],n)){r.opacity=t.alpha}if(!t.visible||t.alpha<=0)return;if(this.cacheStateIfChanged(t,["width"],n)){r.width=t.width+s}if(this.cacheStateIfChanged(t,["height"],n)){r.height=t.height+s}if(this.cacheStateIfChanged(t,["depth"],n)){r.zIndex=t.depth+1}if(o=this.cacheStateIfChanged(t,["pivotX","pivotY"],n)){r[a+"TransformOrigin"]=t.pivotX+s+" "+t.pivotY+s}if(this.cacheStateIfChanged(t,["x","y","rotation","scaleX","scaleY"],n)||o){r[a+"Transform"]=this.getTransformCSS(t)}if(this.cacheStateIfChanged(t,["background"],n)){r.backgroundColor=t.background}if(!r.pointerEvents){r.pointerEvents="none"}var l=i.image;if(l){var h=l.src;if(h!==n.image){n.image=h;r.backgroundImage="url("+h+")"}var u=i.rect;if(u){var c=u[0],f=u[1];if(c!==n.sx){n.sx=c;r.backgroundPositionX=-c+s}if(f!==n.sy){n.sy=f;r.backgroundPositionY=-f+s}}}var d=t.mask;if(d){var v=d.drawable.domElement.style.backgroundImage;if(v!==n.maskImage){n.maskImage=v;r[a+"MaskImage"]=v;r[a+"MaskRepeat"]="no-repeat"}var p=d.x,m=d.y;if(p!==n.maskX||m!==n.maskY){n.maskX=p;n.maskY=m;r[a+"MaskPosition"]=p+s+" "+m+s}}},cacheStateIfChanged:function(t,e,i){var r,n,a,s,o=false;for(r=0,n=e.length;r<n;r++){a=e[r];s=t[a];if(s!=i[a]){i[a]=s;o=true}}return o},getTransformCSS:function(t){var e=this.browser.supportTransform3D,i=e?"3d":"";return"translate"+i+"("+(t.x-t.pivotX)+"px, "+(t.y-t.pivotY)+(e?"px, 0px)":"px)")+"rotate"+i+(e?"(0, 0, 1, ":"(")+t.rotation+"deg)"+"scale"+i+"("+t.scaleX+", "+t.scaleY+(e?", 1)":")")}}}();t.Hilo=e})(window);(function(t){var e=t.Hilo;var i=function(){var t=function(t){t=t||{};var i=t.hasOwnProperty("constructor")?t.constructor:function(){};e.call(i,t);return i};var e=function(t){var e={},r,a;for(r in t){a=t[r];if(i.hasOwnProperty(r)){i[r].call(this,a)}else{e[r]=a}}n(this.prototype,e)};var i={Extends:function(t){var e=this.prototype,i=r(t.prototype);n(this,t);n(i,e);i.constructor=this;this.prototype=i;this.superclass=t.prototype},Mixes:function(t){t instanceof Array||(t=[t]);var e=this.prototype,i;while(i=t.shift()){n(e,i.prototype||i)}},Statics:function(t){n(this,t)}};var r=function(){if(Object.__proto__){return function(t){return{__proto__:t}}}else{var t=function(){};return function(e){t.prototype=e;return new t}}}();var n=function(t){for(var e=1,i=arguments.length;e<i;e++){var r=arguments[e],n;for(var a in r){var o=r[a];if(o&&typeof o==="object"){if(o.value!==undefined||typeof o.get==="function"||typeof o.set==="function"){n=n||{};n[a]=o;continue}}t[a]=o}if(n)s(t,n)}return t};try{var a=Object.defineProperty,s=Object.defineProperties;a({},"$",{value:0})}catch(o){if("__defineGetter__"in Object){a=function(t,e,i){if("value"in i)t[e]=i.value;if("get"in i)t.__defineGetter__(e,i.get);if("set"in i)t.__defineSetter__(e,i.set);return t};s=function(t,e){for(var i in e){if(e.hasOwnProperty(i)){a(t,i,e[i])}}return t}}}return{create:t,mix:n}}();e.Class=i})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=i.create({constructor:function(t,e,i,r,n,a){this.a=t;this.b=e;this.c=i;this.d=r;this.tx=n;this.ty=a},concat:function(t){var e=arguments,i=this.a,r=this.b,n=this.c,a=this.d,s=this.tx,o=this.ty;if(e.length>=6){var l=e[0],h=e[1],u=e[2],c=e[3],f=e[4],d=e[5]}else{l=t.a;h=t.b;u=t.c;c=t.d;f=t.tx;d=t.ty}this.a=i*l+r*u;this.b=i*h+r*c;this.c=n*l+a*u;this.d=n*h+a*c;this.tx=s*l+o*u+f;this.ty=s*h+o*c+d;return this},rotate:function(t){var e=Math.sin(t),i=Math.cos(t),r=this.a,n=this.b,a=this.c,s=this.d,o=this.tx,l=this.ty;this.a=r*i-n*e;this.b=r*e+n*i;this.c=a*i-s*e;this.d=a*e+s*i;this.tx=o*i-l*e;this.ty=o*e+l*i;return this},scale:function(t,e){this.a*=t;this.d*=e;this.c*=t;this.b*=e;this.tx*=t;this.ty*=e;return this},translate:function(t,e){this.tx+=t;this.ty+=e;return this},identity:function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this},invert:function(){var t=this.a;var e=this.b;var i=this.c;var r=this.d;var n=this.tx;var a=t*r-e*i;this.a=r/a;this.b=-e/a;this.c=-i/a;this.d=t/a;this.tx=(i*this.ty-r*n)/a;this.ty=-(t*this.ty-e*n)/a;return this},transformPoint:function(t,e,i){var r=t.x*this.a+t.y*this.c+this.tx,n=t.x*this.b+t.y*this.d+this.ty;if(e){r=r+.5>>0;n=n+.5>>0}if(i)return{x:r,y:n};t.x=r;t.y=n;return t}});e.Matrix=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r={_listeners:null,on:function(t,e,i){var r=this._listeners=this._listeners||{};var n=r[t]=r[t]||[];for(var a=0,s=n.length;a<s;a++){var o=n[a];if(o.listener===e)return}n.push({listener:e,once:i});return this},off:function(t,e){if(arguments.length==0){this._listeners=null;return this}var i=this._listeners&&this._listeners[t];if(i){if(arguments.length==1){delete this._listeners[t];return this}for(var r=0,n=i.length;r<n;r++){var a=i[r];if(a.listener===e){i.splice(r,1);if(i.length===0)delete this._listeners[t];break}}}return this},fire:function(t,e){var i,r;if(typeof t==="string"){r=t}else{i=t;r=t.type}var a=this._listeners;if(!a)return false;var s=a[r];if(s){s=s.slice(0);i=i||new n(r,this,e);if(i._stopped)return false;for(var o=0;o<s.length;o++){var l=s[o];l.listener.call(this,i);if(l.once)s.splice(o--,1)}if(s.length==0)delete a[r];return true}return false}};var n=i.create({constructor:function l(t,e,i){this.type=t;this.target=e;this.detail=i;this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=true}});var a=t.Event;if(a){var s=a.prototype,o=s.stopImmediatePropagation;s.stopImmediatePropagation=function(){o&&o.call(this);this._stopped=true}}e.EventMixin=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=i.create({constructor:function(t){this.init(t)},image:null,rect:null,init:function(t){var i=this,n=i.image;if(r.isDrawable(t)){i.image=t}else{e.copy(i,t,true)}var a=i.image;if(typeof a==="string"){if(n&&a===n.getAttribute("src")){a=i.image=n}else{i.image=null;var s=new Image;s.onload=function(){s.onload=null;i.init(s)};s.src=a;return}}if(a&&!i.rect)i.rect=[0,0,a.width,a.height]},Statics:{isDrawable:function(t){if(!t||!t.tagName)return false;var e=t.tagName.toLowerCase();return e==="img"||e==="canvas"||e==="video"}}});e.Drawable=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=i.create({constructor:function(t){t=t||{};e.copy(this,t,true)},renderType:null,canvas:null,stage:null,startDraw:function(t){},draw:function(t){},endDraw:function(t){},transform:function(){},hide:function(){},remove:function(t){},clear:function(t,e,i,r){},resize:function(t,e){}});e.Renderer=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.Renderer;var n=i.create({Extends:r,constructor:function(t){n.superclass.constructor.call(this,t);this.context=this.canvas.getContext("2d")},renderType:"canvas",context:null,startDraw:function(t){if(t.visible&&t.alpha>0){if(t===this.stage){this.context.clearRect(0,0,t.width,t.height)}this.context.save();return true}return false},draw:function(t){var e=this.context,i=t.width,r=t.height;var n=t.background;if(n){e.fillStyle=n;e.fillRect(0,0,i,r)}var a=t.drawable,s=a&&a.image;if(s){var o=a.rect,l=o[2],h=o[3],u=o[4],c=o[5];if(!l||!h){return}if(!i&&!r){i=t.width=l;r=t.height=h}if(u||c)e.translate(u-l*.5,c-h*.5);e.drawImage(s,o[0],o[1],l,h,0,0,i,r)}},endDraw:function(t){this.context.restore()},transform:function(t){var i=t.drawable;if(i&&i.domElement){e.setElementStyleByView(t);return}var r=this.context,n=t.scaleX,a=t.scaleY;if(t===this.stage){var s=this.canvas.style,o=t._scaleX,l=t._scaleY;if(!o&&n!=1||o&&o!=n){t._scaleX=n;s.width=n*t.width+"px"}if(!l&&a!=1||l&&l!=a){t._scaleY=a;s.height=a*t.height+"px"}}else{var h=t.x,u=t.y,c=t.pivotX,f=t.pivotY,d=t.rotation%360,v=t.mask;if(v){v._render(this);r.clip()}var p=t.align;if(p){if(typeof p==="function"){t.align()}else{var m=t.parent;if(m){var g=t.width,_=t.height,w=m.width,y=m.height;switch(p){case"TL":h=0;u=0;break;case"T":h=w-g>>1;u=0;break;case"TR":h=w-g;u=0;break;case"L":h=0;u=y-_>>1;break;case"C":h=w-g>>1;u=y-_>>1;break;case"R":h=w-g;u=y-_>>1;break;case"BL":h=0;u=y-_;break;case"B":h=w-g>>1;u=y-_;break;case"BR":h=w-g;u=y-_;break}}}}if(h!=0||u!=0)r.translate(h,u);if(d!=0)r.rotate(d*Math.PI/180);if(n!=1||a!=1)r.scale(n,a);if(c!=0||f!=0)r.translate(-c,-f)}if(t.alpha>0)r.globalAlpha*=t.alpha},remove:function(t){var e=t.drawable;var i=e&&e.domElement;if(i){var r=i.parentNode;if(r){r.removeChild(i)}}},clear:function(t,e,i,r){this.context.clearRect(t,e,i,r)},resize:function(t,e){this.canvas.width=t;this.canvas.height=e}});e.CanvasRenderer=n})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.Renderer;var n=e.Drawable;var a=function(){return i.create({Extends:r,constructor:function(t){a.superclass.constructor.call(this,t)},renderType:"dom",startDraw:function(e){var i=e.drawable=e.drawable||new n;i.domElement=i.domElement||t(e,i);return true},draw:function(t){var e=t.parent,i=t.drawable.domElement,r=i.parentNode;if(e){var n=e.drawable.domElement;if(n!=r){n.appendChild(i)}if(!t.width&&!t.height){var a=t.drawable.rect;if(a&&(a[2]||a[3])){t.width=a[2];t.height=a[3]}}}else if(t===this.stage&&!r){i.style.overflow="hidden";this.canvas.appendChild(i)}},transform:function(t){e.setElementStyleByView(t);if(t===this.stage){var i=this.canvas.style,r=t._scaleX,n=t._scaleY,a=t.scaleX,s=t.scaleY;if(!r&&a!=1||r&&r!=a){t._scaleX=a;i.width=a*t.width+"px"}if(!n&&s!=1||n&&n!=s){t._scaleY=s;i.height=s*t.height+"px"}}},remove:function(t){var e=t.drawable;var i=e&&e.domElement;if(i){var r=i.parentNode;if(r){r.removeChild(i)}}},hide:function(t){var e=t.drawable&&t.drawable.domElement;if(e)e.style.display="none"},resize:function(t,e){var i=this.canvas.style;i.width=t+"px";i.height=e+"px";if(i.position!="absolute"){i.position="relative"}}});function t(t,i){var r=t.tagName||"div",n=i.image,a=t.width||n&&n.width,s=t.height||n&&n.height,o=e.createElement(r),l=o.style;if(t.id)o.id=t.id;l.position="absolute";l.left=(t.left||0)+"px";l.top=(t.top||0)+"px";l.width=a+"px";l.height=s+"px";if(r=="canvas"){o.width=a;o.height=s;if(n){var h=o.getContext("2d");var u=i.rect||[0,0,a,s];h.drawImage(n,u[0],u[1],u[2],u[3],t.x||0,t.y||0,t.width||u[2],t.height||u[3])}}else{l.opacity=t.alpha!=undefined?t.alpha:1;if(t===this.stage||t.clipChildren)l.overflow="hidden";if(n&&n.src){l.backgroundImage="url("+n.src+")";var c=t.rectX||0,f=t.rectY||0;l.backgroundPosition=-c+"px "+-f+"px"}}return o}}();e.DOMRenderer=a})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.Renderer;var n=e.Matrix;var a=Math.PI/180;var s=i.create({Extends:r,Statics:{MAX_BATCH_NUM:2e3,ATTRIBUTE_NUM:5,isSupport:null},renderType:"webgl",gl:null,constructor:function(e){t.__render=this;s.superclass.constructor.call(this,e);var i=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl");this.maxBatchNum=s.MAX_BATCH_NUM;this.positionStride=s.ATTRIBUTE_NUM*4;var r=this.maxBatchNum*s.ATTRIBUTE_NUM*4;var n=this.maxBatchNum*6;this.positions=new Float32Array(r);this.indexs=new Uint16Array(n);for(var a=0,o=0;a<n;a+=6,o+=4){this.indexs[a+0]=o+0;this.indexs[a+1]=o+1;this.indexs[a+2]=o+2;this.indexs[a+3]=o+1;this.indexs[a+4]=o+2;this.indexs[a+5]=o+3}this.batchIndex=0;this.sprites=[];i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA);i.clearColor(0,0,0,0);i.disable(i.DEPTH_TEST);i.disable(i.CULL_FACE);i.enable(i.BLEND);this._initShaders();this.defaultShader.active();this.positionBuffer=i.createBuffer();this.indexBuffer=i.createBuffer();i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer);i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indexs,i.STATIC_DRAW);i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer);i.bufferData(i.ARRAY_BUFFER,this.positions,i.DYNAMIC_DRAW);i.vertexAttribPointer(this.a_position,2,i.FLOAT,false,this.positionStride,0);i.vertexAttribPointer(this.a_TexCoord,2,i.FLOAT,false,this.positionStride,2*4);i.vertexAttribPointer(this.a_alpha,1,i.FLOAT,false,this.positionStride,4*4)},context:null,startDraw:function(t){if(t.visible&&t.alpha>0){if(t===this.stage){this.clear()}return true}return false},draw:function(t){var e=this.context,i=t.width,r=t.height;var n=t.background;var a=t.drawable,s=a&&a.image;if(s){var o=this.gl;if(!s.texture){this.activeShader.uploadTexture(s)}var l=a.rect,h=l[2],u=l[3],c=l[4],f=l[5];if(!i&&!r){i=t.width=h;r=t.height=u}if(this.batchIndex>=this.maxBatchNum){this._renderBatches()}var d=this._createVertexs(s,l[0],l[1],h,u,0,0,i,r);var v=this.batchIndex*this.positionStride;var p=this.positions;var m=t.__webglRenderAlpha;p[v+0]=d[0];p[v+1]=d[1];p[v+2]=d[2];p[v+3]=d[3];p[v+4]=m;p[v+5]=d[4];p[v+6]=d[5];p[v+7]=d[6];p[v+8]=d[7];p[v+9]=m;p[v+10]=d[8];p[v+11]=d[9];p[v+12]=d[10];p[v+13]=d[11];p[v+14]=m;p[v+15]=d[12];p[v+16]=d[13];p[v+17]=d[14];p[v+18]=d[15];p[v+19]=m;var g=t.__webglWorldMatrix;for(var _=0;_<4;_++){var w=p[v+_*5];var y=p[v+_*5+1];p[v+_*5]=g.a*w+g.c*y+g.tx;p[v+_*5+1]=g.b*w+g.d*y+g.ty}t.texture=s.texture;this.sprites[this.batchIndex++]=t}},endDraw:function(t){if(t===this.stage){this._renderBatches()}},transform:function(t){var i=t.drawable;if(i&&i.domElement){e.setElementStyleByView(t);return}var r=this.context,a=t.scaleX,s=t.scaleY;if(t===this.stage){var o=this.canvas.style,l=t._scaleX,h=t._scaleY;if(!l&&a!=1||l&&l!=a){t._scaleX=a;o.width=a*t.width+"px"}if(!h&&s!=1||h&&h!=s){t._scaleY=s;o.height=s*t.height+"px"}t.__webglWorldMatrix=t.__webglWorldMatrix||new n(1,0,0,1,0,0)}else{t.__webglWorldMatrix=t.__webglWorldMatrix||new n(1,0,0,1,0,0);this._setConcatenatedMatrix(t,t.parent)}if(t.alpha>0){if(t.parent&&t.parent.__webglRenderAlpha){t.__webglRenderAlpha=t.alpha*t.parent.__webglRenderAlpha}else{t.__webglRenderAlpha=t.alpha}}},remove:function(t){var e=t.drawable;var i=e&&e.domElement;if(i){var r=i.parentNode;if(r){r.removeChild(i)}}},clear:function(t,e,i,r){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},resize:function(t,e){if(this.width!==t||this.height!==e){this.width=this.canvas.width=t;this.height=this.canvas.height=e;this.gl.viewport(0,0,t,e);this.canvasHalfWidth=t*.5;this.canvasHalfHeight=e*.5;this._uploadProjectionTransform(true)}},_renderBatches:function(){var t=this.gl;t.bufferSubData(t.ARRAY_BUFFER,0,this.positions.subarray(0,this.batchIndex*this.positionStride));var e=0;var i=0;var r=null;for(var n=0;n<this.batchIndex;n++){var a=this.sprites[n];if(r&&r!==a.texture){this._renderBatch(e,n);e=n;i=1}r=a.texture}this._renderBatch(e,this.batchIndex);this.batchIndex=0},_renderBatch:function(t,e){var i=this.gl;var r=e-t;if(r>0){i.bindTexture(i.TEXTURE_2D,this.sprites[t].texture);i.drawElements(i.TRIANGLES,r*6,i.UNSIGNED_SHORT,t*6*2)}},_uploadProjectionTransform:function(t){if(!this._projectionTransformElements||t){this._projectionTransformElements=new Float32Array([1/this.canvasHalfWidth,0,0,0,-1/this.canvasHalfHeight,0,-1,1,1])}this.gl.uniformMatrix3fv(this.u_projectionTransform,false,this._projectionTransformElements)},_initShaders:function(){var t="            attribute vec2 a_position;\n            attribute vec2 a_TexCoord;\n            attribute float a_alpha;\n            uniform mat3 u_projectionTransform;\n            varying vec2 v_TexCoord;\n            varying float v_alpha;\n            void main(){\n                gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n                v_TexCoord = a_TexCoord;\n                v_alpha = a_alpha;\n            }\n        ";var e="\n            precision mediump float;\n            uniform sampler2D u_Sampler;\n            varying vec2 v_TexCoord;\n            varying float v_alpha;\n            void main(){\n                gl_FragColor = texture2D(u_Sampler, v_TexCoord) * v_alpha;\n            }\n        ";this.defaultShader=new l(this,{v:t,f:e},{attributes:["a_position","a_TexCoord","a_alpha"],uniforms:["u_projectionTransform","u_Alpha","u_Sampler"]})},_createVertexs:function(t,e,i,r,n,a,s,o,l){var h=this.__tempVertexs||[];var u=t.width;var c=t.height;r=r/u;n=n/c;e=e/u;i=i/c;o=o;l=l;a=a;s=s;if(r+e>1){r=1-e}if(n+i>1){n=1-i}var f=0;h[f++]=a;h[f++]=s;h[f++]=e;h[f++]=i;h[f++]=a+o;h[f++]=s;h[f++]=e+r;h[f++]=i;h[f++]=a;h[f++]=s+l;h[f++]=e;h[f++]=i+n;h[f++]=a+o;h[f++]=s+l;h[f++]=e+r;h[f++]=i+n;return h},_setConcatenatedMatrix:function(t,e){var i=t.__webglWorldMatrix;var r=1,n=0,s=t.rotation%360,o=t.pivotX,l=t.pivotY,h=t.scaleX,u=t.scaleY;if(s){var c=s*a;r=Math.cos(c);n=Math.sin(c)}i.a=r*h;i.b=n*h;i.c=-n*u;i.d=r*u;i.tx=t.x-i.a*o-i.c*l;i.ty=t.y-i.b*o-i.d*l;i.concat(e.__webglWorldMatrix)}});var o={};var l=function(t,e,i){this.renderer=t;this.gl=t.gl;this.program=this._createProgram(this.gl,e.v,e.f);i=i||{};this.attributes=i.attributes||[];this.uniforms=i.uniforms||[]};l.prototype={active:function(){var t=this;var e=t.renderer;var i=t.gl;var r=t.program;if(r&&i){e.activeShader=t;i.useProgram(r);t.attributes.forEach(function(t){e[t]=i.getAttribLocation(r,t);i.enableVertexAttribArray(e[t])});t.uniforms.forEach(function(t){e[t]=i.getUniformLocation(r,t)});if(t.width!==e.width||t.height!==e.height){t.width=e.width;t.height=e.height;e._uploadProjectionTransform()}}},uploadTexture:function(t){var e=this.gl;var i=this.renderer;if(o[t.src]){t.texture=o[t.src]}else{var r=e.createTexture();var n=i.u_Sampler;e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,r);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.uniform1i(n,0);e.bindTexture(e.TEXTURE_2D,null);t.texture=r;o[t.src]=r}},_createProgram:function(t,e,i){var r=this._createShader(t,t.VERTEX_SHADER,e);var n=this._createShader(t,t.FRAGMENT_SHADER,i);if(!r||!n){return null}var a=t.createProgram();if(a){t.attachShader(a,r);t.attachShader(a,n);t.linkProgram(a);t.deleteShader(n);t.deleteShader(r);var s=t.getProgramParameter(a,t.LINK_STATUS);if(!s){var o=t.getProgramInfoLog(a);console.log("Failed to link program: "+o);t.deleteProgram(a);return null}}return a},_createShader:function(t,e,i){var r=t.createShader(e);if(r){t.shaderSource(r,i);t.compileShader(r);var n=t.getShaderParameter(r,t.COMPILE_STATUS);if(!n){var a=t.getShaderInfoLog(r);console.log("Failed to compile shader: "+a);t.deleteShader(r);return null}}return r}};s.isSupport=function(){if(this._isSupport!==undefined){return this._isSupport}else{var t=document.createElement("canvas");if(t.getContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))){this._isSupport=true}else{this._isSupport=false}return this._isSupport}};e.WebGLRenderer=s})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.EventMixin;var n=e.Matrix;var a=function(){return i.create({Mixes:r,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("View");e.copy(this,t,true)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:true,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:true,background:null,mask:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,getStage:function(){var t=this,e;while(e=t.parent)t=e;if(t.canvas)return t;return null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(t,e){if(typeof e==="number")t.addChildAt(this,e);else t.addChild(this);return this},removeFromParent:function(){var t=this.parent;if(t)t.removeChild(this);return this},getBounds:function(){var t=this.width,e=this.height,i=this.getConcatenatedMatrix(),r=this.boundsArea||[{x:0,y:0},{x:t,y:0},{x:t,y:e},{x:0,y:e}],n=[],a,s,o,l,h,u,c;for(var f=0,d=r.length;f<d;f++){a=i.transformPoint(r[f],true,true);s=a.x;o=a.y;if(f==0){l=h=s;u=c=o}else{if(l>s)l=s;else if(h<s)h=s;if(u>o)u=o;else if(c<o)c=o}n[f]=a}n.x=l;n.y=u;n.width=h-l;n.height=c-u;return n},getConcatenatedMatrix:function(t){var e=new n(1,0,0,1,0,0);for(var i=this;i!=t&&i.parent;i=i.parent){var r=1,a=0,s=i.rotation%360,o=i.pivotX,l=i.pivotY,h=i.scaleX,u=i.scaleY;if(s){var c=s*Math.PI/180;r=Math.cos(c);a=Math.sin(c)}if(o!=0)e.tx-=o;if(l!=0)e.ty-=l;e.concat(r*h,a*h,-a*u,r*u,i.x,i.y)}return e},hitTestPoint:function(e,i,r){var n=this.getBounds(),a=e>=n.x&&e<=n.x+n.width&&i>=n.y&&i<=n.y+n.height;if(a&&r){a=t(e,i,n)}return a},hitTestObject:function(t,e){var i=this.getBounds(),r=t.getBounds(),n=i.x<=r.x+r.width&&r.x<=i.x+i.width&&i.y<=r.y+r.height&&r.y<=i.y+i.height;if(n&&e){n=a(i,r)}return!!n},_render:function(t,e){if((!this.onUpdate||this.onUpdate(e)!==false)&&t.startDraw(this)){t.transform(this);this.render(t,e);t.endDraw(this)}},_fireMouseEvent:function(t){t.eventCurrentTarget=this;this.fire(t);if(t.type=="mousemove"){if(!this.__mouseOver){this.__mouseOver=true;var i=e.copy({},t);i.type="mouseover";this.fire(i)}}else if(t.type=="mouseout"){this.__mouseOver=false}var r=this.parent;if(!t._stopped&&!t._stopPropagationed&&r){if(t.type=="mouseout"||t.type=="touchout"){if(!r.hitTestPoint(t.stageX,t.stageY,true)){r._fireMouseEvent(t)}}else{r._fireMouseEvent(t)}}},onUpdate:null,render:function(t,e){t.draw(this)},toString:function(){return e.viewToString(this)}});function t(t,e,i){var r=0,n=false,a,s,o,l;for(var h=0,u=i.length;h<u;h++){var c=i[h],f=i[(h+1)%u];if(c.y==f.y&&e==c.y){c.x>f.x?(a=f.x,s=c.x):(a=c.x,s=f.x);if(t>=a&&t<=s){n=true;continue}}c.y>f.y?(o=f.y,l=c.y):(o=c.y,l=f.y);if(e<o||e>l)continue;var d=(e-c.y)*(f.x-c.x)/(f.y-c.y)+c.x;if(d>t)r++;else if(d==t)n=true;if(c.x>t&&c.y==e){var v=i[(u+h-1)%u];if(v.y<e&&f.y>e||v.y>e&&f.y<e){r++}}}return n||r%2==1}function a(t,e){var i=s(t,e,{overlap:-Infinity,normal:{x:0,y:0}});if(i)return s(e,t,i);return false}function s(t,e,i){var r=t.length,n=e.length,a,s,o,l,h,u,c,f,d,v={x:0,y:0};for(var p=0;p<r;p++){a=t[p];s=t[p<r-1?p+1:0];v.x=a.y-s.y;v.y=s.x-a.x;o=Math.sqrt(v.x*v.x+v.y*v.y);v.x/=o;v.y/=o;l=h=t[0].x*v.x+t[0].y*v.y;for(var m=1;m<r;m++){f=t[m].x*v.x+t[m].y*v.y;if(f>h)h=f;else if(f<l)l=f}u=c=e[0].x*v.x+e[0].y*v.y;for(m=1;m<n;m++){f=e[m].x*v.x+e[m].y*v.y;if(f>c)c=f;else if(f<u)u=f}if(l<u){d=u-h;v.x=-v.x;v.y=-v.y}else{d=l-c}if(d>=0){return false}else if(d>i.overlap){i.overlap=d;i.normal.x=v.x;i.normal.y=v.y}}return i}}();e.View=a})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.Drawable;var n=e.createElement("canvas");var a=n.getContext("2d");var s={_cacheDirty:true,cache:function(t){if(t||this._cacheDirty||!this._cacheImage){this.updateCache()}},updateCache:function(){n.width=this.width;n.height=this.height;this._draw(a);this._cacheImage=new Image;this._cacheImage.src=n.toDataURL();this.drawable=this.drawable||new r;this.drawable.init(this._cacheImage);this._cacheDirty=false},setCacheDirty:function(t){this._cacheDirty=t}};e.CacheMixin=s})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.View;var n=i.create({Extends:r,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("Container");n.superclass.constructor.call(this,t);if(this.children)this._updateChildren();else this.children=[]},children:null,pointerChildren:true,clipChildren:false,getNumChildren:function(){return this.children.length},addChildAt:function(t,e){var i=this.children,r=i.length,n=t.parent;e=e<0?0:e>r?r:e;var a=this.getChildIndex(t);if(a==e){return this}else if(a>=0){i.splice(a,1);e=e==r?r-1:e}else if(n){n.removeChild(t)}i.splice(e,0,t);if(a<0){this._updateChildren(e)}else{var s=a<e?a:e;var o=a<e?e:a;this._updateChildren(s,o+1)}return this},addChild:function(t){var e=this.children.length,i=arguments;for(var r=0,n=i.length;r<n;r++){this.addChildAt(i[r],e+r)}return this},removeChildAt:function(t){var e=this.children;if(t<0||t>=e.length)return null;var i=e[t];if(i){if(!i.__renderer){var r=i;while(r=r.parent){if(r.renderer){i.__renderer=r.renderer;break}else if(r.__renderer){i.__renderer=r.__renderer;break}}}if(i.__renderer){i.__renderer.remove(i)}i.parent=null;i.depth=-1}e.splice(t,1);this._updateChildren(t);return i},removeChild:function(t){return this.removeChildAt(this.getChildIndex(t))},removeChildById:function(t){var e=this.children,i;for(var r=0,n=e.length;r<n;r++){i=e[r];if(i.id===t){this.removeChildAt(r);return i}}return null},removeAllChildren:function(){while(this.children.length)this.removeChildAt(0);return this},getChildAt:function(t){var e=this.children;if(t<0||t>=e.length)return null;return e[t]},getChildById:function(t){var e=this.children,i;for(var r=0,n=e.length;r<n;r++){i=e[r];if(i.id===t)return i}return null},getChildIndex:function(t){return this.children.indexOf(t)},setChildIndex:function(t,e){var i=this.children,r=i.indexOf(t);if(r>=0&&r!=e){var n=i.length;e=e<0?0:e>=n?n-1:e;i.splice(r,1);i.splice(e,0,t);this._updateChildren()}return this},swapChildren:function(t,e){var i=this.children,r=this.getChildIndex(t),n=this.getChildIndex(e);t.depth=n;i[n]=t;e.depth=r;i[r]=e},swapChildrenAt:function(t,e){var i=this.children,r=this.getChildAt(t),n=this.getChildAt(e);r.depth=e;i[e]=r;n.depth=t;i[t]=n},sortChildren:function(t){var e=t,i=this.children;if(typeof e=="string"){var r=e;e=function(t,e){return e[r]-t[r]}}i.sort(e);this._updateChildren()},_updateChildren:function(t,e){var i=this.children,r,t=t||0,e=e||i.length;for(var n=t;n<e;n++){r=i[n];r.depth=n+1;r.parent=this}},contains:function(t){while(t=t.parent){if(t===this){return true}}return false},getViewAtPoint:function(t,e,i,r,n){var a=r?[]:null,s=this.children,o,l;for(var h=s.length-1;h>=0;h--){o=s[h];if(!o||!o.visible||o.alpha<=0||n&&!o.pointerEnabled)continue;if(o.children&&o.children.length&&!(n&&!o.pointerChildren)){l=o.getViewAtPoint(t,e,i,r,n)}if(l){if(!r)return l;else if(l.length)a=a.concat(l)}else if(o.hitTestPoint(t,e,i)){if(!r)return o;else a.push(o)}}return r&&a.length?a:null},render:function(t,e){n.superclass.render.call(this,t,e);var i=this.children.slice(0),r,a,s;for(r=0,a=i.length;r<a;r++){s=i[r];if(s.parent===this)s._render(t,e)}}});e.Container=n})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.Container;var n=e.CanvasRenderer;var a=e.DOMRenderer;var s=e.WebGLRenderer;var o=i.create({Extends:r,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("Stage");o.superclass.constructor.call(this,t);this._initRenderer(t);var i=this.width,r=this.height,n=this.updateViewport();if(!t.width)i=n&&n.width||320;if(!t.height)r=n&&n.height||480;this.resize(i,r,true)},canvas:null,renderer:null,paused:false,viewport:null,_initRenderer:function(t){var i=t.canvas;var r=t.container;var o=t.renderType||"canvas";if(typeof i==="string")i=e.getElement(i);if(typeof r==="string")r=e.getElement(r);if(!i){var l=o==="dom"?"div":"canvas";i=e.createElement(l,{style:{position:"absolute"}})}else if(!i.getContext){o="dom"}this.canvas=i;if(r)r.appendChild(i);var h={canvas:i,stage:this};switch(o){case"dom":this.renderer=new a(h);break;case"webgl":if(s.isSupport()){this.renderer=new s(h)}else{this.renderer=new n(h)}break;case"canvas":default:this.renderer=new n(h);break}},addTo:function(t){var e=this.canvas;if(e.parentNode!==t){t.appendChild(e)}return this},tick:function(t){if(!this.paused){this._render(this.renderer,t)}},enableDOMEvent:function(t,e){var i=this,r=i.canvas,n=typeof t==="string"?[t]:t,e=e!==false,a=i._domListener||(i._domListener=function(t){i._onDOMEvent(t)});for(var s=0;s<n.length;s++){var t=n[s];if(e){r.addEventListener(t,a,false)}else{r.removeEventListener(t,a)}}return i},_onDOMEvent:function(t){var i=t.type,r=t,n=i.indexOf("touch")==0;var a=t;if(n){var s=t.touches,o=t.changedTouches;a=s&&s.length?s[0]:o&&o.length?o[0]:null}var l=a.pageX||a.clientX,h=a.pageY||a.clientY,u=this.viewport||this.updateViewport();r.stageX=l=(l-u.left)/this.scaleX;r.stageY=h=(h-u.top)/this.scaleY;r.stopPropagation=function(){this._stopPropagationed=true};var c=this.getViewAtPoint(l,h,true,false,true)||this,f=this.canvas,d=this._eventTarget;var v=i==="mouseout";if(d&&(d!=c&&(!d.contains||!d.contains(c))||v)){var p=i==="touchmove"?"touchout":i==="mousemove"||v||!c?"mouseout":null;if(p){var m=e.copy({},r);m.type=p;m.eventTarget=d;d._fireMouseEvent(m)}r.lastEventTarget=d;this._eventTarget=null}if(c&&c.pointerEnabled&&i!=="mouseout"){r.eventTarget=this._eventTarget=c;c._fireMouseEvent(r)}if(!n){var g=c&&c.pointerEnabled&&c.useHandCursor?"pointer":"";f.style.cursor=g}if(e.browser.android&&i==="touchmove"){t.preventDefault()}},updateViewport:function(){var t=this.canvas,i=null;if(t.parentNode){i=this.viewport=e.getElementRect(t)}return i},resize:function(t,e,i){if(i||this.width!==t||this.height!==e){this.width=t;this.height=e;this.renderer.resize(t,e);this.updateViewport()}}});e.Stage=o})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.View;var n=e.Drawable;var a=i.create({Extends:r,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("Bitmap");a.superclass.constructor.call(this,t);this.drawable=new n(t);if(!this.width||!this.height){var i=this.drawable.rect;if(i){this.width=i[2];this.height=i[3]}}},setImage:function(t,e){this.drawable.init({image:t,rect:e});if(e){this.width=e[2];this.height=e[3]}return this}});e.Bitmap=a})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.View;var n=e.Drawable;var a=i.create({Extends:r,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("Sprite");a.superclass.constructor.call(this,t);this._frames=[];this._frameNames={};this.drawable=new n;if(t.frames)this.addFrame(t.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:true,paused:false,loop:true,timeBased:false,interval:1,currentFrame:0,getNumFrames:function(){
return this._frames?this._frames.length:0},addFrame:function(t,e){var i=e!=null?e:this._frames.length;if(t instanceof Array){for(var r=0,n=t.length;r<n;r++){this.setFrame(t[r],i+r)}}else{this.setFrame(t,i)}return this},setFrame:function(t,e){var i=this._frames,r=i.length;e=e<0?0:e>r?r:e;i[e]=t;if(t.name)this._frameNames[t.name]=t;if(e==0&&!this.width||!this.height){this.width=t.rect[2];this.height=t.rect[3]}return this},getFrame:function(t){if(typeof t==="number"){var e=this._frames;if(t<0||t>=e.length)return null;return e[t]}return this._frameNames[t]},getFrameIndex:function(t){var e=this._frames,i=e.length,r=-1;if(typeof t==="number"){r=t}else{var n=typeof t==="string"?this._frameNames[t]:t;if(n){for(var a=0;a<i;a++){if(n===e[a]){r=a;break}}}}return r},play:function(){this.paused=false;return this},stop:function(){this.paused=true;return this},"goto":function(t,e){var i=this._frames.length,r=this.getFrameIndex(t);this.currentFrame=r<0?0:r>=i?i-1:r;this.paused=e;this._firstRender=true;return this},_render:function(t,e){var i=this.currentFrame,r;if(this._firstRender){r=i;this._firstRender=false}else{r=this._nextFrame(e)}if(r!=i){this.currentFrame=r;var n=this._frames[r].callback;n&&n.call(this)}if(this.onEnterFrame)this.onEnterFrame(r);this.drawable.init(this._frames[r]);a.superclass._render.call(this,t,e)},_nextFrame:function(t){var e=this._frames,i=e.length,r=this.currentFrame,n=e[r],a=n.duration||this.interval,s=this._frameElapsed;var o=r==0&&!this.drawable?0:s+(this.timeBased?t:1);s=this._frameElapsed=o<a?o:0;if(n.stop||!this.loop&&r>=i-1){this.stop()}if(!this.paused&&s==0){if(n.next!=null){r=this.getFrameIndex(n.next)}else if(r>=i-1){r=0}else if(this.drawable){r++}}return r},setFrameCallback:function(t,e){t=this.getFrame(t);if(t)t.callback=e;return this},onEnterFrame:null});e.Sprite=a})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.View;var n=e.Drawable;var a=i.create({Extends:r,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("DOMElement");a.superclass.constructor.call(this,t);this.drawable=new n;var i=this.drawable.domElement=t.element||e.createElement("div");i.id=this.id},_render:function(t,e){if(!this.onUpdate||this.onUpdate(e)!==false){t.transform(this);if(this.visible&&this.alpha>0){this.render(t,e)}}},render:function(t,e){var i=t.canvas;if(i.getContext){var r=this.drawable.domElement,n=this.depth,a=i.nextSibling,s;if(r.parentNode)return;while(a&&a.nodeType!=3){s=parseInt(a.style.zIndex)||0;if(s<=0||s>n){break}a=a.nextSibling}i.parentNode.insertBefore(this.drawable.domElement,a)}else{t.draw(this)}}});e.DOMElement=a})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.View;var n=e.CacheMixin;var a=function(){var t=document.createElement("canvas");var s=t.getContext&&t.getContext("2d");return i.create({Extends:r,Mixes:n,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("Graphics");a.superclass.constructor.call(this,t);this._actions=[]},lineWidth:1,lineAlpha:1,lineCap:null,lineJoin:null,miterLimit:10,hasStroke:false,strokeStyle:"0",hasFill:false,fillStyle:"0",fillAlpha:0,lineStyle:function(t,e,i,r,n,a){var s=this,o=s._addAction;o.call(s,["lineWidth",s.lineWidth=t||1]);o.call(s,["strokeStyle",s.strokeStyle=e||"0"]);o.call(s,["lineAlpha",s.lineAlpha=i||1]);if(r!=undefined)o.call(s,["lineCap",s.lineCap=r]);if(n!=undefined)o.call(s,["lineJoin",s.lineJoin=n]);if(a!=undefined)o.call(s,["miterLimit",s.miterLimit=a]);s.hasStroke=true;return s},beginFill:function(t,e){var i=this,r=i._addAction;r.call(i,["fillStyle",i.fillStyle=t]);r.call(i,["fillAlpha",i.fillAlpha=e||1]);i.hasFill=true;return i},endFill:function(){var t=this,e=t._addAction;if(t.hasStroke)e.call(t,["stroke"]);if(t.hasFill)e.call(t,["fill"]);t.setCacheDirty(true);return t},beginLinearGradientFill:function(t,e,i,r,n,a){var o=this,l=s.createLinearGradient(t,e,i,r);for(var h=0,u=n.length;h<u;h++){l.addColorStop(a[h],n[h])}o.hasFill=true;return o._addAction(["fillStyle",o.fillStyle=l])},beginRadialGradientFill:function(t,e,i,r,n,a,o,l){var h=this,u=s.createRadialGradient(t,e,i,r,n,a);for(var c=0,f=o.length;c<f;c++){u.addColorStop(l[c],o[c])}h.hasFill=true;return h._addAction(["fillStyle",h.fillStyle=u])},beginBitmapFill:function(t,e){var i=this,r=s.createPattern(t,e||"");i.hasFill=true;return i._addAction(["fillStyle",i.fillStyle=r])},beginPath:function(){return this._addAction(["beginPath"])},closePath:function(){return this._addAction(["closePath"])},moveTo:function(t,e){return this._addAction(["moveTo",t,e])},lineTo:function(t,e){return this._addAction(["lineTo",t,e])},quadraticCurveTo:function(t,e,i,r){return this._addAction(["quadraticCurveTo",t,e,i,r])},bezierCurveTo:function(t,e,i,r,n,a){return this._addAction(["bezierCurveTo",t,e,i,r,n,a])},drawRect:function(t,e,i,r){return this._addAction(["rect",t,e,i,r])},drawRoundRectComplex:function(t,e,i,r,n,a,s,o){var l=this,h=l._addAction;h.call(l,["moveTo",t+n,e]);h.call(l,["lineTo",t+i-a,e]);h.call(l,["arc",t+i-a,e+a,a,-Math.PI/2,0,false]);h.call(l,["lineTo",t+i,e+r-s]);h.call(l,["arc",t+i-s,e+r-s,s,0,Math.PI/2,false]);h.call(l,["lineTo",t+o,e+r]);h.call(l,["arc",t+o,e+r-o,o,Math.PI/2,Math.PI,false]);h.call(l,["lineTo",t,e+n]);h.call(l,["arc",t+n,e+n,n,Math.PI,Math.PI*3/2,false]);return l},drawRoundRect:function(t,e,i,r,n){return this.drawRoundRectComplex(t,e,i,r,n,n,n,n)},drawCircle:function(t,e,i){return this._addAction(["arc",t+i,e+i,i,0,Math.PI*2,0])},drawEllipse:function(t,e,i,r){var n=this;if(i==r)return n.drawCircle(t,e,i);var a=n._addAction;var s=i/2,o=r/2,l=.5522847498307933,h=l*s,u=l*o;t=t+s;e=e+o;a.call(n,["moveTo",t+s,e]);a.call(n,["bezierCurveTo",t+s,e-u,t+h,e-o,t,e-o]);a.call(n,["bezierCurveTo",t-h,e-o,t-s,e-u,t-s,e]);a.call(n,["bezierCurveTo",t-s,e+u,t-h,e+o,t,e+o]);a.call(n,["bezierCurveTo",t+h,e+o,t+s,e+u,t+s,e]);return n},drawSVGPath:function(t){var e=this,i=e._addAction,r=t.split(/,| (?=[a-zA-Z])/);i.call(e,["beginPath"]);for(var n=0,a=r.length;n<a;n++){var s=r[n],o=s[0].toUpperCase(),l=s.substring(1).split(/,| /);if(l[0].length==0)l.shift();switch(o){case"M":i.call(e,["moveTo",l[0],l[1]]);break;case"L":i.call(e,["lineTo",l[0],l[1]]);break;case"C":i.call(e,["bezierCurveTo",l[0],l[1],l[2],l[3],l[4],l[5]]);break;case"Z":i.call(e,["closePath"]);break}}return e},_draw:function(t){var e=this,i=e._actions,r=i.length,n;t.beginPath();for(n=0;n<r;n++){var a=i[n],s=a[0],o=a.length>1?a.slice(1):null;if(typeof t[s]=="function")t[s].apply(t,o);else t[s]=a[1]}},render:function(t,e){var i=this,r=t.canvas;if(t.renderType==="canvas"){i._draw(t.context)}else{i.cache();t.draw(i)}},clear:function(){var t=this;t._actions.length=0;t.lineWidth=1;t.lineAlpha=1;t.lineCap=null;t.lineJoin=null;t.miterLimit=10;t.hasStroke=false;t.strokeStyle="0";t.hasFill=false;t.fillStyle="0";t.fillAlpha=1;t.setCacheDirty(true);return t},_addAction:function(t){var e=this;e._actions.push(t);return e}})}();e.Graphics=a})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.View;var n=e.CacheMixin;var a=i.create({Extends:r,Mixes:n,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("Text");a.superclass.constructor.call(this,t);if(!t.font)this.font="12px arial";this._fontHeight=a.measureFontHeight(this.font)},text:null,color:"#000",textAlign:null,textVAlign:null,outline:false,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,setFont:function(t){var e=this;if(e.font!==t){e.font=t;e._fontHeight=a.measureFontHeight(t)}return e},render:function(t,e){var i=this,r=t.canvas;if(t.renderType==="canvas"){i._draw(t.context)}else if(t.renderType==="dom"){var n=i.drawable;var a=n.domElement;var s=a.style;s.font=i.font;s.textAlign=i.textAlign;s.color=i.color;s.width=i.width+"px";s.height=i.height+"px";s.lineHeight=i._fontHeight+i.lineSpacing+"px";a.innerHTML=i.text;t.draw(this)}else{i.cache();t.draw(i)}},_draw:function(t){var e=this,i=e.text.toString();if(!i)return;t.font=e.font;t.textAlign=e.textAlign;t.textBaseline="top";var r=i.split(/\r\n|\r|\n|<br(?:[ \/])*>/);var n=0,a=0;var s=e._fontHeight+e.lineSpacing;var o,l,h;var u=[];for(o=0,len=r.length;o<len;o++){l=r[o];h=t.measureText(l).width;if(h<=e.maxWidth){u.push({text:l,y:a});if(n<h)n=h;a+=s;continue}var c="",f=0,d,v,p;for(v=0,wlen=l.length;v<wlen;v++){p=l[v];d=t.measureText(c+p).width;if(d>e.maxWidth){u.push({text:c,y:a});if(n<f)n=f;a+=s;c=p}else{f=d;c+=p}if(v==wlen-1){u.push({text:c,y:a});if(c!==p&&n<d)n=d;a+=s}}}e.textWidth=n;e.textHeight=a;if(!e.width)e.width=n;if(!e.height)e.height=a;var m=0;switch(e.textVAlign){case"middle":m=e.height-e.textHeight>>1;break;case"bottom":m=e.height-e.textHeight;break}var g=e.background;if(g){t.fillStyle=g;t.fillRect(0,0,e.width,e.height)}if(e.outline)t.strokeStyle=e.color;else t.fillStyle=e.color;for(var o=0;o<u.length;o++){var l=u[o];e._drawTextLine(t,l.text,m+l.y)}},_drawTextLine:function(t,e,i){var r=this,n=0,a=r.width;switch(r.textAlign){case"center":n=a>>1;break;case"right":case"end":n=a;break}if(r.outline)t.strokeText(e,n,i);else t.fillText(e,n,i)},Statics:{measureFontHeight:function(t){var i=document.documentElement,r;var n=e.createElement("div",{style:{font:t,position:"absolute"},innerHTML:"M"});i.appendChild(n);r=n.offsetHeight;i.removeChild(n);return r}}});e.Text=a})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.Container;var n=e.Bitmap;var a=i.create({Extends:r,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("BitmapText");a.superclass.constructor.call(this,t);var i=t.text+"";if(i){this.text="";this.setText(i)}this.pointerChildren=false},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(t){var e=this,i=t.toString(),r=i.length;if(e.text==i)return;e.text=i;var n,a,s,o,l=0,h=0,u=0;for(n=0;n<r;n++){a=i.charAt(n);s=e.glyphs[a];if(s){u=l+(l>0?e.letterSpacing:0);if(e.children[n]){o=e.children[n];o.setImage(s.image,s.rect)}else{o=e._createBitmap(s);e.addChild(o)}o.x=u;l=u+s.rect[2];h=Math.max(h,s.rect[3])}}for(n=e.children.length-1;n>=r;n--){e._releaseBitmap(e.children[n]);e.children[n].removeFromParent()}e.width=l;e.height=h;this.setTextAlign();return e},_createBitmap:function(t){var e;if(a._pool.length){e=a._pool.pop();e.setImage(t.image,t.rect)}else{e=new n({image:t.image,rect:t.rect})}return e},_releaseBitmap:function(t){a._pool.push(t)},setTextAlign:function(t){this.textAlign=t||this.textAlign;switch(this.textAlign){case"center":this.pivotX=this.width*.5;break;case"right":this.pivotX=this.width;break;case"left":default:this.pivotX=0;break}return this},hasGlyphs:function(t){var e=this.glyphs;if(!e)return false;var t=t.toString(),i=t.length,r;for(r=0;r<i;r++){if(!e[t.charAt(r)])return false}return true},Statics:{_pool:[],createGlyphs:function(t,e,i,r){var n=t.toString();i=i||n.length;r=r||1;var a=e.width/i;var s=e.height/r;var o={};for(var l=0,h=t.length;l<h;l++){charStr=n.charAt(l);o[charStr]={image:e,rect:[a*(l%i),s*Math.floor(l/i),a,s]}}return o}}});e.BitmapText=a})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.View;var n=e.Drawable;var a=i.create({Extends:r,constructor:function(t){t=t||{};this.id=this.id||t.id||e.getUid("Button");a.superclass.constructor.call(this,t);this.drawable=new n(t);this.setState(a.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:true,useHandCursor:true,setEnabled:function(t){if(this.enabled!=t){if(!t){this.setState(a.DISABLED)}else{this.setState(a.UP)}}return this},setState:function(t){if(this.state!==t){this.state=t;this.pointerEnabled=this.enabled=t!==a.DISABLED;var i;switch(t){case a.UP:i=this.upState;break;case a.OVER:i=this.overState;break;case a.DOWN:i=this.downState;break;case a.DISABLED:i=this.disabledState;break}if(i){this.drawable.init(i);e.copy(this,i,true)}}return this},fire:function(t,e){if(!this.enabled)return;var i=typeof t==="string"?t:t.type;switch(i){case"mousedown":case"touchstart":case"touchmove":this.setState(a.DOWN);break;case"mouseover":this.setState(a.OVER);break;case"mouseup":if(this.overState)this.setState(a.OVER);else if(this.upState)this.setState(a.UP);break;case"touchend":case"touchout":case"mouseout":this.setState(a.UP);break}return a.superclass.fire.call(this,t,e)},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}});e.Button=a})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=function(){return i.create({constructor:function(i){this._frames=t(i);this._sprites=e(i,this._frames)},_frames:null,_sprites:null,getFrame:function(t){var e=this._frames;return e&&e[t]},getSprite:function(t){var e=this._sprites;return e&&e[t]},Statics:{createSpriteFrames:function(t,e,i,r,n,a,s){if(Object.prototype.toString.call(t)==="[object Array]"){var e=[];for(var o=0,l=t.length;o<l;o++){e=e.concat(this.createSpriteFrames.apply(this,t[o]))}return e}else{if(typeof e==="string"){var h=e.split(",");e=[];for(var u=0,c=h.length;u<c;u++){var f=h[u].split("-");if(f.length==1){e.push(parseInt(f[0]))}else{for(var o=parseInt(f[0]),l=parseInt(f[1]);o<=l;o++){e.push(o)}}}}var d=Math.floor(i.width/r);for(var o=0;o<e.length;o++){var v=e[o];e[o]={rect:[r*(v%d),n*Math.floor(v/d),r,n],image:i,duration:s}}e[0].name=t;if(a){e[e.length-1].next=t}else{e[e.length-1].stop=true}return e}}}});function t(t){var e=t.frames;if(!e)return null;var i=[],r;if(e instanceof Array){for(var n=0,a=e.length;n<a;n++){r=e[n];i[n]={image:t.image,rect:r}}}else{var s=e.frameWidth;var o=e.frameHeight;var l=t.width/s|0;var h=t.height/o|0;var u=e.numFrames||l*h;for(var n=0;n<u;n++){i[n]={image:t.image,rect:[n%l*s,(n/l|0)*o,s,o]}}}return i}function e(t,e){var i=t.sprites;if(!i)return null;var a={},s,o,l;for(var h in i){s=i[h];if(n(s)){o=r(e[s])}else if(s instanceof Array){o=[];for(var u=0,c=s.length;u<c;u++){var f=s[u],d;if(n(f)){l=r(e[f])}else{d=f.rect;if(n(d))d=e[f.rect];l=r(d,f)}o[u]=l}}else{o=[];for(var u=s.from;u<=s.to;u++){o[u-s.from]=r(e[u],s[u])}}a[h]=o}return a}function r(t,e){var i={image:t.image,rect:t.rect};if(e){i.name=e.name||null;i.duration=e.duration||0;i.stop=!!e.stop;i.next=e.next||null}return i}function n(t){return typeof t==="number"}}();e.TextureAtlas=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=i.create({constructor:function(t){this._targetFPS=t||30;this._interval=1e3/this._targetFPS;this._tickers=[]},_paused:false,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(i){if(this._intervalId)return;this._lastTime=+new Date;var r=this,n=this._interval,a=t.requestAnimationFrame||t[e.browser.jsVendor+"RequestAnimationFrame"];if(i&&a){var s=function(){r._tick()};var o=function(){r._intervalId=setTimeout(o,n);a(s)}}else{o=function(){r._intervalId=setTimeout(o,n);r._tick()}}o()},stop:function(){clearTimeout(this._intervalId);this._intervalId=null;this._lastTime=0},pause:function(){this._paused=true},resume:function(){this._paused=false},_tick:function(){if(this._paused)return;var t=+new Date,e=t-this._lastTime,i=this._tickers;if(++this._tickCount>=this._targetFPS){this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0;this._tickCount=0;this._tickTime=0}else{this._tickTime+=t-this._lastTime}this._lastTime=t;for(var r=0,n=i.length;r<n;r++){i[r].tick(e)}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(t){if(!t||typeof t.tick!="function"){throw new Error("Ticker: The tick object must implement the tick method.")}this._tickers.push(t)},removeTick:function(t){var e=this._tickers,i=e.indexOf(t);if(i>=0){e.splice(i,1)}}});e.Ticker=r})(window);(function(t){var e=t.Hilo;var i=Array.prototype,r=i.slice;i.indexOf=i.indexOf||function(t,e){e=e||0;var i=this.length,r;if(i==0||e>=i)return-1;if(e<0)e=i+e;for(r=e;r<i;r++){if(this[r]===t)return r}return-1};var n=Function.prototype;n.bind=n.bind||function(t){var e=this,i=r.call(arguments,1),n=function(){};function a(){var n=i.concat(r.call(arguments));return e.apply(this instanceof a?this:t,n)}n.prototype=e.prototype;a.prototype=new n;return a};e.undefined=undefined})(window);(function(t){var e=t.Hilo;var i=e.Class;var r={startDrag:function(t){var i=this;var r;var t=t||[-Infinity,-Infinity,Infinity,Infinity];var n={x:0,y:0,preX:0,preY:0};var a=t[0];var s=t[1];var o=t[2]==Infinity?Infinity:a+t[2];var l=t[3]==Infinity?Infinity:s+t[3];function h(t){t.stopPropagation();f(t);i.off(e.event.POINTER_START,h);i.fire("dragStart",n);i.__dragX=i.x-n.x;i.__dragY=i.y-n.y;if(!r){r=this.getStage()}r.on(e.event.POINTER_MOVE,c);document.addEventListener(e.event.POINTER_END,u)}function u(t){document.removeEventListener(e.event.POINTER_END,u);r&&r.off(e.event.POINTER_MOVE,c);i.fire("dragEnd",n);i.on(e.event.POINTER_START,h)}function c(t){f(t);i.fire("dragMove",n);var e=n.x+i.__dragX;var r=n.y+i.__dragY;i.x=Math.max(a,Math.min(o,e));i.y=Math.max(s,Math.min(l,r))}function f(t){n.preX=n.x;n.preY=n.y;n.x=t.stageX;n.y=t.stageY}function d(){document.removeEventListener(e.event.POINTER_END,u);r&&r.off(e.event.POINTER_MOVE,c);i.off(e.event.POINTER_START,h)}i.on(e.event.POINTER_START,h);i.stopDrag=d},stopDrag:function(){}};e.drag=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=function(){function t(){return+new Date}return i.create({constructor:function(t,e,i,r){var n=this;n.target=t;n._startTime=0;n._seekTime=0;n._pausedTime=0;n._pausedStartTime=0;n._reverseFlag=1;n._repeatCount=0;if(arguments.length==3){r=i;i=e;e=null}for(var a in r)n[a]=r[a];n.setProps(e,i);if(!r.duration&&r.time){n.duration=r.time||0;n.time=0}},target:null,duration:0,delay:0,paused:false,loop:false,reverse:false,repeat:0,repeatDelay:0,ease:null,time:0,onStart:null,onUpdate:null,onComplete:null,setProps:function(t,e){var i=this,r=i.target,n=t||e,a=i._fromProps={},s=i._toProps={};t=t||r;e=e||r;for(var o in n){s[o]=e[o]||0;r[o]=a[o]=t[o]||0}return i},start:function(){var e=this;e._startTime=t()+e.delay;e._seekTime=0;e._pausedTime=0;e.paused=false;r.add(e);return e},stop:function(){r.remove(this);return this},pause:function(){var e=this;e.paused=true;e._pausedStartTime=t();return e},resume:function(){var e=this;e.paused=false;if(e._pausedStartTime)e._pausedTime+=t()-e._pausedStartTime;e._pausedStartTime=0;return e},seek:function(e,i){var n=this,a=t();n._startTime=a;n._seekTime=e;n._pausedTime=0;if(i!==undefined)n.paused=i;n._update(a,true);r.add(n);return n},link:function(t){var e=this,i=t.delay,n=e._startTime;if(typeof i==="string"){var a=i.indexOf("+")==0,s=i.indexOf("-")==0;i=a||s?Number(i.substr(1))*(a?1:-1):Number(i)}t.delay=i;t._startTime=a||s?n+e.duration+i:n+i;e._next=t;r.remove(t);return e},_render:function(t){var e=this,i=e.target,r=e._fromProps,n;for(n in r)i[n]=r[n]+(e._toProps[n]-r[n])*t},_update:function(e,i){var n=this;if(n.paused&&!i)return;var a=e-n._startTime-n._pausedTime+n._seekTime;if(a<0)return;var s=a/n.duration,o=false,l;s=s<=0?0:s>=1?1:n.ease?n.ease(s):s;if(n.reverse){if(n._reverseFlag<0)s=1-s;if(s<1e-7){if(n.repeat>0&&n._repeatCount++>=n.repeat||n.repeat==0&&!n.loop){o=true}else{n._startTime=t();n._pausedTime=0;n._reverseFlag*=-1}}}if(n.time==0&&(l=n.onStart))l.call(n,n);n.time=a;n._render(s);(l=n.onUpdate)&&l.call(n,s,n);if(s>=1){if(n.reverse){n._startTime=t();n._pausedTime=0;n._reverseFlag*=-1}else if(n.loop||n.repeat>0&&n._repeatCount++<n.repeat){n._startTime=t()+n.repeatDelay;n._pausedTime=0}else{o=true}}var h=n._next;if(h&&h.time<=0){var u=h._startTime;if(u>0&&u<=e){h._render(s);h.time=a;r.add(h)}else if(o&&(u<0||u>e)){h.start()}}if(o){(l=n.onComplete)&&l.call(n,n);return true}},Statics:{_tweens:[],tick:function(){var e=r._tweens,i,n,a=e.length;for(n=0;n<a;n++){i=e[n];if(i&&i._update(t())){e.splice(n,1);n--}}return r},add:function(t){var e=r._tweens;if(e.indexOf(t)==-1)e.push(t);return r},remove:function(t){if(t instanceof Array){for(var e=0,i=t.length;e<i;e++){r.remove(t[e])}return r}var n=r._tweens,e;if(t instanceof r){e=n.indexOf(t);if(e>-1)n.splice(e,1)}else{for(e=0;e<n.length;e++){if(n[e].target===t){n.splice(e,1);e--}}}return r},removeAll:function(){r._tweens.length=0;return r},fromTo:function(t,e,i,n){var a=t instanceof Array;t=a?t:[t];var s,o,l=n.stagger,h=[];for(o=0;o<t.length;o++){s=new r(t[o],e,i,n);if(l)s.delay=(n.delay||0)+(o*l||0);s.start();h.push(s)}return a?h:s},to:function(t,e,i){return r.fromTo(t,null,e,i)},from:function(t,e,i){return r.fromTo(t,e,null,i)}}})}();e.Tween=r})(window);(function(t){var e=t.Hilo;var i=function(){function t(t,e,i,r,n){t=t||{};e&&(t.EaseIn=e);i&&(t.EaseOut=i);r&&(t.EaseInOut=r);n&&(t.EaseNone=n);return t}var e=t(null,null,null,null,function(t){return t});var i=t(null,function(t){return t*t},function(t){return-t*(t-2)},function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)});var r=t(null,function(t){return t*t*t},function(t){return--t*t*t+1},function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)});var n=t(null,function(t){return t*t*t*t},function(t){return-(--t*t*t*t-1)},function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)});var a=t(null,function(t){return t*t*t*t*t},function(t){return(t=t-1)*t*t*t*t+1},function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)});var s=Math,o=s.PI,l=o*.5,h=s.sin,u=s.cos,c=s.pow,f=s.sqrt;var d=t(null,function(t){return-u(t*l)+1},function(t){return h(t*l)},function(t){return-.5*(u(o*t)-1)});var v=t(null,function(t){return t==0?0:c(2,10*(t-1))},function(t){return t==1?1:-c(2,-10*t)+1},function(t){if(t==0||t==1)return t;if((t*=2)<1)return.5*c(2,10*(t-1));return.5*(-c(2,-10*(t-1))+2)});var p=t(null,function(t){return-(f(1-t*t)-1)},function(t){return f(1- --t*t)},function(t){if((t/=.5)<1)return-.5*(f(1-t*t)-1);return.5*(f(1-(t-=2)*t)+1)});var m=t({a:1,p:.4,s:.1,config:function(t,e){m.a=t;m.p=e;m.s=e/(2*o)*Math.asin(1/t)||0}},function(t){return-(m.a*c(2,10*(t-=1))*h((t-m.s)*(2*o)/m.p))},function(t){return m.a*c(2,-10*t)*h((t-m.s)*(2*o)/m.p)+1},function(t){return(t*=2)<1?-.5*(m.a*c(2,10*(t-=1))*h((t-m.s)*(2*o)/m.p)):m.a*c(2,-10*(t-=1))*h((t-m.s)*(2*o)/m.p)*.5+1});var g=t({o:1.70158,s:2.59491,config:function(t){g.o=t;g.s=t*1.525}},function(t){return t*t*((g.o+1)*t-g.o)},function(t){return(t=t-1)*t*((g.o+1)*t+g.o)+1},function(t){return(t*=2)<1?.5*(t*t*((g.s+1)*t-g.s)):.5*((t-=2)*t*((g.s+1)*t+g.s)+2)});var _=t(null,function(t){return 1-_.EaseOut(1-t)},function(t){if((t/=1)<.36364){return 7.5625*t*t}else if(t<.72727){return 7.5625*(t-=.54545)*t+.75}else if(t<.90909){return 7.5625*(t-=.81818)*t+.9375}else{return 7.5625*(t-=.95455)*t+.984375}},function(t){return t<.5?_.EaseIn(t*2)*.5:_.EaseOut(t*2-1)*.5+.5});return{Linear:e,Quad:i,Cubic:r,Quart:n,Quint:a,Sine:d,Expo:v,Circ:p,Elastic:m,Back:g,Bounce:_}}();e.Ease=i})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=i.create({load:function(t){var e=this;var i=new Image;if(t.crossOrigin){i.crossOrigin=t.crossOrigin}i.onload=function(){e.onLoad(i)};i.onerror=i.onabort=e.onError.bind(i);i.src=t.src+(t.noCache?(t.src.indexOf("?")==-1?"?":"&")+"t="+ +new Date:"")},onLoad:function(e){e=e||t.event;var i=e;i.onload=i.onerror=i.onabort=null;return i},onError:function(t){var e=t.target;e.onload=e.onerror=e.onabort=null;return t}});e.ImageLoader=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=i.create({load:function(e){var i=this,n=e.src,a=e.type=="jsonp";if(a){var s=e.callbackName||"callback";var o=e.callback||"jsonp"+ ++r._count;var l=t;if(!l[o]){l[o]=function(t){delete l[o]}}}if(a)n+=(n.indexOf("?")==-1?"?":"&")+s+"="+o;if(e.noCache)n+=(n.indexOf("?")==-1?"?":"&")+"t="+ +new Date;var h=document.createElement("script");h.type="text/javascript";h.async=true;h.onload=i.onLoad.bind(i);h.onerror=i.onError.bind(i);h.src=n;if(e.id)h.id=e.id;document.getElementsByTagName("head")[0].appendChild(h)},onLoad:function(t){var e=t.target;e.onload=e.onerror=null;return e},onError:function(t){var e=t.target;e.onload=e.onerror=null;return t},Statics:{_count:0}});e.ScriptLoader=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.EventMixin;var n=e.ImageLoader;var a=e.ScriptLoader;var s=i.create({Mixes:r,constructor:function(t){this._source=[];this.add(t)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(t){var e=this;if(t){t=t instanceof Array?t:[t];e._source=e._source.concat(t)}return e},get:function(t){if(t){var e=this._source;for(var i=0;i<e.length;i++){var r=e[i];if(r.id===t||r.src===t){return r}}}return null},getContent:function(t){var e=this.get(t);return e&&e.content},start:function(){var t=this;t._loadNext();return t},_loadNext:function(){var t=this,e=t._source,i=e.length;if(t._loaded>=i){t.fire("complete");return}if(t._currentIndex<i-1&&t._connections<t.maxConnections){var r=++t._currentIndex;var n=e[r];var a=t._getLoader(n);if(a){var s=a.onLoad,o=a.onError;a.onLoad=function(e){a.onLoad=s;a.onError=o;var i=s&&s.call(a,e)||e.target;t._onItemLoad(r,i)};a.onError=function(e){a.onLoad=s;a.onError=o;o&&o.call(a,e);t._onItemError(r,e)};t._connections++}t._loadNext();a&&a.load(n)}},_getLoader:function(t){var e=this,i=t.loader;if(i)return i;var r=t.type||o(t.src);switch(r){case"png":case"jpg":case"jpeg":case"gif":i=new n;break;case"js":case"jsonp":i=new a;break}return i},_onItemLoad:function(t,e){var i=this,r=i._source[t];r.loaded=true;r.content=e;i._connections--;i._loaded++;i.fire("load",r);i._loadNext()},_onItemError:function(t,e){var i=this,r=i._source[t];r.error=e;i._connections--;i._loaded++;i.fire("error",r);i._loadNext()},getSize:function(t){var e=0,i=this._source;for(var r=0;r<i.length;r++){var n=i[r];e+=(t?n.loaded&&n.size:n.size)||0}return e},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});function o(t){var e=/\/?[^\/]+\.(\w+)(\?\S+)?$/i,i,r;if(i=t.match(e)){r=i[1].toLowerCase()}return r||null}e.LoadQueue=s})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.EventMixin;var n=i.create({Mixes:r,constructor:function(t){e.copy(this,t,true);this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:false,autoPlay:false,loaded:false,playing:false,duration:0,volume:1,muted:false,_element:null,load:function(){if(!this._element){try{var t=this._element=new Audio;t.addEventListener("canplaythrough",this._onAudioEvent,false);t.addEventListener("ended",this._onAudioEvent,false);t.addEventListener("error",this._onAudioEvent,false);t.src=this.src;t.volume=this.volume;t.load()}catch(e){var t=this._element={};t.play=t.pause=function(){}}}return this},_onAudioEvent:function(t){var e=t.type;switch(e){case"canplaythrough":t.target.removeEventListener(e,this._onAudioEvent);this.loaded=true;this.duration=this._element.duration;this.fire("load");if(this.autoPlay)this._doPlay();break;case"ended":this.playing=false;this.fire("end");if(this.loop)this._doPlay();break;case"error":this.fire("error");break}},_doPlay:function(){if(!this.playing){this._element.volume=this.muted?0:this.volume;this._element.play();this.playing=true}},play:function(){if(this.playing)this.stop();if(!this._element){this.autoPlay=true;this.load()}else if(this.loaded){this._doPlay()}return this},pause:function(){if(this.playing){this._element.pause();this.playing=false}return this},resume:function(){if(!this.playing){this._doPlay()}return this},stop:function(){if(this.playing){this._element.pause();this._element.currentTime=0;this.playing=false}return this},setVolume:function(t){if(this.volume!=t){this.volume=t;this._element.volume=t}return this},setMute:function(t){if(this.muted!=t){this.muted=t;this._element.volume=t?0:this.volume}return this},Statics:{isSupported:t.Audio!==null}});e.HTMLAudio=n})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.EventMixin;var n=function(){var n=t.AudioContext||t.webkitAudioContext;var a=n?new n:null;return i.create({Mixes:r,constructor:function(t){e.copy(this,t,true);this._init()},src:null,loop:false,autoPlay:false,loaded:false,playing:false,duration:0,volume:1,muted:false,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=a;this._gainNode=a.createGain?a.createGain():a.createGainNode();this._gainNode.connect(a.destination);this._onAudioEvent=this._onAudioEvent.bind(this);this._onDecodeComplete=this._onDecodeComplete.bind(this);this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var t=new XMLHttpRequest;t.src=this.src;t.open("GET",this.src,true);t.responseType="arraybuffer";t.onload=this._onAudioEvent;t.onprogress=this._onAudioEvent;t.onerror=this._onAudioEvent;t.send();this._buffer=true}return this},_onAudioEvent:function(t){var e=t.type;switch(e){case"load":var i=t.target;i.onload=i.onprogress=i.onerror=null;this._context.decodeAudioData(i.response,this._onDecodeComplete,this._onDecodeError);i=null;break;case"ended":this.playing=false;this.fire("end");if(this.loop)this._doPlay();break;case"progress":this.fire(t);break;case"error":this.fire(t);break}},_onDecodeComplete:function(t){this._buffer=t;this.loaded=true;this.duration=t.duration;this.fire("load");if(this.autoPlay)this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var t=this._context.createBufferSource();if(!t.start){t.start=t.noteOn;t.stop=t.noteOff}t.buffer=this._buffer;t.onended=this._onAudioEvent;this._gainNode.gain.value=this.muted?0:this.volume;t.connect(this._gainNode);t.start(0,this._offset);this._audioNode=t;this._startTime=this._context.currentTime;this.playing=true},_clearAudioNode:function(){var t=this._audioNode;if(t){t.onended=null;t.disconnect(0);this._audioNode=null}},play:function(){if(this.playing)this.stop();if(this.loaded){this._doPlay()}else if(!this._buffer){this.autoPlay=true;this.load()}return this},pause:function(){if(this.playing){this._audioNode.stop(0);this._offset+=this._context.currentTime-this._startTime;this.playing=false}return this},resume:function(){if(!this.playing){this._doPlay()}return this},stop:function(){if(this.playing){this._audioNode.stop(0);this._audioNode.disconnect();this._offset=0;this.playing=false}return this},setVolume:function(t){if(this.volume!=t){this.volume=t;this._gainNode.gain.value=t}return this},setMute:function(t){if(this.muted!=t){this.muted=t;this._gainNode.gain.value=t?0:this.volume}return this},Statics:{isSupported:n!=null,enabled:false,enable:function(){if(!this.enabled&&a){var t=a.createBufferSource();t.buffer=a.createBuffer(1,1,22050);t.connect(a.destination);t.start?t.start(0,0,0):t.noteOn(0,0,0);this.enabled=true;return true}return this.enabled}}})}();e.WebAudio=n})(window);(function(t){var e=t.Hilo;var i=e.HTMLAudio;var r=e.WebAudio;var n={_audios:{},enableAudio:function(){if(r.isSupported){r.enable()}},getAudio:function(t){t=this._normalizeSource(t);var e=this._audios[t.src];if(!e){if(r.isSupported){e=new r(t)}else if(i.isSupported){e=new i(t)}this._audios[t.src]=e}return e},removeAudio:function(t){var e=typeof t==="string"?t:t.src;var i=this._audios[e];if(i){i.stop();i.off();this._audios[e]=null;delete this._audios[e]}},_normalizeSource:function(t){var i={};if(typeof t==="string")i={src:t};else e.copy(i,t);return i}};e.WebSound=n})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=i.create({constructor:function(t){this.width=0;this.height=0;this.target=null;this.deadzone=null;this.bounds=null;this.scroll={x:0,y:0};e.copy(this,t)},tick:function(t){var e=this.target;var i=this.scroll;var r=this.bounds;var n=this.deadzone;if(e){var a,s;if(n){a=Math.min(Math.max(e.x-i.x,n[0]),n[0]+n[2]);s=Math.min(Math.max(e.y-i.y,n[1]),n[1]+n[3])}else{a=this.width*.5;s=this.height*.5}i.x=e.x-a;i.y=e.y-s;if(r){i.x=Math.min(Math.max(i.x,r[0]),r[0]+r[2]);i.y=Math.min(Math.max(i.y,r[1]),r[1]+r[3])}}else{i.x=0;i.y=0}},follow:function(t,e){this.target=t;if(e!==undefined){this.deadzone=e}this.tick()}});e.Camera=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=function(){var t=Math.PI/180;function r(t,e,i,r,n){return{x:t,y:e*r-i*n,z:e*n+i*r}}function n(t,e,i,r,n){return{x:t*r-i*n,y:e,z:t*n+i*r}}function a(t,e,i,r,n){return{x:t*r-e*n,y:t*n+e*r,z:i}}var s=i.create({constructor:function(t){t.x=t.x||0;t.y=t.y||0;t.z=t.z||0;t.rotationX=t.rotationX||0;t.rotationY=t.rotationY||0;t.rotationZ=t.rotationZ||0;e.copy(this,t)},translate:function(t,e,i){this.tx=t;this.ty=e;this.tz=i},rotateX:function(t){this.rotationX=t},rotateY:function(t){this.rotationY=t},rotateZ:function(t){
this.rotationZ=t},project:function(e,i){var s=this.rotationX*t,o=this.rotationY*t,l=this.rotationZ*t,h=Math.cos(s),u=Math.sin(s),c=Math.cos(o),f=Math.sin(o),d=Math.cos(l),v=Math.sin(l),p=e.x-this.x,m=e.y-this.y,g=e.z-this.z,_=a(p,m,g,d,v);_=n(_.x,_.y,_.z,c,f);_=r(_.x,_.y,_.z,h,u);if(this.tx)_.x-=this.tx;if(this.ty)_.y-=this.ty;if(this.tz)_.z-=this.tz;var w=this.fv/(this.fv+_.z),y=_.x*w,x=-_.y*w;if(i){i.x=y+this.fx;i.y=x+this.fy;i.z=-_.z;i.scaleX=w;i.scaleY=w}else{return{x:y+this.fx,y:x+this.fy,z:-_.z,scale:w}}},sortZ:function(){this.stage.children.sort(function(t,e){return t.z>e.z})},tick:function(){this.sortZ()}});return s}();e.Camera3d=r})(window);(function(t){var e=t.Hilo;var i=e.Class;var r=e.View;var n=e.Container;var a=e.Bitmap;var s=e.Drawable;var o=function(){var t=["x","y","vx","vy","ax","ay","rotation","rotationV","scale","scaleV","alpha","alphaV","life"];var a=[];for(var o=0,l=t.length;o<l;o++){var h=t[o];a.push(h);a.push(h+"Var")}var u={x:0,y:0,vx:0,vy:0,ax:0,ay:0,scale:1,scaleV:0,alpha:1,alphaV:0,rotation:0,rotationV:0,life:1};var c=[];var f=i.create({Extends:n,constructor:function p(t){this.id=this.id||t.id||e.getUid("ParticleSystem");this.emitterX=0;this.emitterY=0;this.gx=0;this.gy=0;this.totalTime=Infinity;this.emitNum=10;this.emitNumVar=0;this.emitTime=.2;this.emitTimeVar=0;this.particle={};p.superclass.constructor.call(this,t);this.reset(t)},Statics:{PROPS:a,PROPS_DEFAULT:u,diedParticles:c},reset:function(t){e.copy(this,t);this.particle.system=this;if(this.totalTime<=0){this.totalTime=Infinity}},onUpdate:function(t){t*=.001;if(this._isRun){this._totalRunTime+=t;this._currentRunTime+=t;if(this._currentRunTime>=this._emitTime){this._currentRunTime=0;this._emitTime=v(this.emitTime,this.emitTimeVar);this._emit()}if(this._totalRunTime>=this.totalTime){this.stop()}}},_emit:function(){var t=v(this.emitNum,this.emitNumVar)>>0;for(var e=0;e<t;e++){this.addChild(d.create(this.particle))}},start:function(){this.stop(true);this._currentRunTime=0;this._totalRunTime=0;this._isRun=true;this._emitTime=v(this.emitTime,this.emitTimeVar)},stop:function(t){this.isRun=false;if(t){for(var e=this.children.length-1;e>=0;e--){this.children[e].destroy()}}}});var d=i.create({Extends:r,constructor:function m(t){this.id=this.id||t.id||e.getUid("Particle");m.superclass.constructor.call(this,t);this.init(t)},onUpdate:function(t){t*=.001;if(this._died){return}var e=this.ax+this.system.gx;var i=this.ay+this.system.gy;this.vx+=e*t;this.vy+=i*t;this.x+=this.vx*t;this.y+=this.vy*t;this.rotation+=this.rotationV;if(this._time>.1){this.alpha+=this.alphaV}this.scale+=this.scaleV;this.scaleX=this.scaleY=this.scale;this._time+=t;if(this._time>=this.life||this.alpha<0){this.destroy()}},setImage:function(t,e){this.drawable=this.drawable||new s;var e=e||[0,0,t.width,t.height];this.width=e[2];this.height=e[3];this.drawable.rect=e;this.drawable.image=t},destroy:function(){this.died=true;this.removeFromParent();c.push(this)},init:function(t){this.system=t.system;this._died=false;this._time=0;this.alpha=1;for(var e=0,i=a.length;e<i;e++){var r=a[e];var n=t[r]===undefined?u[r]:t[r];this[r]=v(n,t[r+"Var"])}this.x+=this.system.emitterX;this.y+=this.system.emitterY;if(t.image){var s=t.frame;if(s&&s[0].length){s=s[Math.random()*s.length>>0]}this.setImage(t.image,s);if(t.pivotX!==undefined){this.pivotX=t.pivotX*s[2]}if(t.pivotY!==undefined){this.pivotY=t.pivotY*s[3]}}},Statics:{create:function(t){if(c.length>0){var e=c.pop();e.init(t);return e}else{return new d(t)}}}});function v(t,e){return e?t+(Math.random()-.5)*2*e:t}return f}();e.ParticleSystem=o})(window);